(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{226:function(t,e,i){"use strict";i.r(e);var s={data:function(){return{headers:[{text:"ID",value:"id",width:"10%"},{text:"Nombre",value:"name"},{text:"Descripción",value:"description"},,{text:"",value:"action"}],business:[],businessNode:[],errors:[],editingText:"",file:"",editingMode:!1,action:null,selectedModel:null,selectedRole:null,selectedUser:null,assignRole:!1,chosenFile:null,select:[],search:"",snackbar:!1,textSnack:"texto snackbar",dialog:!1,editedIndex:-1,imageUrl:"",image:"",editado:{id:"",name:"",description:"",imageUrl:this.imageUrl,file:"",select:"",is_mod:!1},defaultItem:{id:"",name:"",description:"",file:"",imageUrl:"",is_mod:!1}}},created:function(){this.getbusiness(),this.getbusinessNode()},methods:{getbusiness:function(){var t=this;axios.get("/businessList").then((function(e){t.business=e.data.data})).catch((function(e){t.errors.push(e)}))},getbusinessNode:function(){var t=this;axios.get("/businessNode").then((function(e){t.businessNode=e.data.data})).catch((function(e){t.errors.push(e)}))},cancelar:function(){this.dialog=!1,this.editado=Object.assign({},this.defaultItem),this.editedIndex=-1},editar:function(t){this.editedIndex=this.business.indexOf(t),this.editado=Object.assign({},t),this.editado.is_mod=!1,this.dialog=!0},borrar:function(t){var e=this.business.indexOf(t);this.editado=Object.assign({},t),console.log(this.business[e].id),1==confirm("¿Está seguro de borrar el registro?")?(this.deleteCat(),this.snackbar=!0,this.textSnack="Se eliminó el registro."):(this.snackbar=!0,this.textSnack="Operación cancelada.")},guardar:function(){this.editedIndex>-1?(this.id=this.editado.id,this.marca=this.editado.marca,this.modelo=this.editado.modelo,this.stock=this.editado.stock,this.snackbar=!0,this.textSnack="¡Actualización Exitosa!",this.editarCat()):""==this.editado.marca||""==this.editado.modelo||0==this.editado.stock?(this.snackbar=!0,this.textSnack="Datos incompletos."):(this.name=this.editado.name,this.description=this.editado.description,this.snackbar=!0,this.textSnack="¡Alta exitosa!",this.altaMovil()),this.cancelar()},altaMovil:function(){var t=this;axios.post("/business/add",this.editado).then((function(e){t.getbusiness()})),this.name="",this.description=""},editarCat:function(){var t=this;console.log(this.editado),axios.put("/business/update",this.editado).then((function(e){t.getbusiness()})),this.name="",this.description=""},deleteCat:function(){var t=this;axios.put("/business/delete",this.editado).then((function(e){t.getbusiness()})),this.name="",this.description=""},handleFileUpload:function(){this.file=this.$refs.file.files[0],this.editado.file=this.$refs.file.files[0],console.log(this.editado.file)},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(t){var e=this,i=t.target.files,s=(i[0].name,new FileReader);s.addEventListener("load",(function(){e.imageUrl=s.result,e.editado.is_mod=!0,e.editado.imageUrl=s.result})),s.readAsDataURL(i[0]),this.image=i[0]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Registro":"Editar Registro"}}},a=i(3),n=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",[i("v-col",[i("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.business,search:t.search,"sort-by":"id"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-system-bar",{attrs:{color:"indigo darken-2",dark:""}}),t._v(" "),i("v-toolbar",{attrs:{flat:"",color:"indigo"},scopedSlots:t._u([{key:"extension",fn:function(){return[i("v-btn",{attrs:{fab:"",color:"cyan accent-2",bottom:"",left:"",absolute:""},on:{click:function(e){t.dialog=!t.dialog}}},[i("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}])},[t._v(" "),i("v-toolbar-title",{staticClass:"white--text"},[t._v("Business")]),t._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),i("v-spacer"),t._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-form",{ref:"form",scopedSlots:t._u([{key:"activator",fn:function(t){t.on}}])},[t._v(" "),i("v-card",[i("v-card-title",{staticClass:"cyan white--text"},[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),i("v-card-text",[i("v-container",[i("v-row",[i("v-text-field",{attrs:{label:"Nombre",required:""},model:{value:t.editado.name,callback:function(e){t.$set(t.editado,"name",e)},expression:"editado.name"}}),t._v(" "),i("v-text-field",{attrs:{label:"Descripción",required:""},model:{value:t.editado.description,callback:function(e){t.$set(t.editado,"description",e)},expression:"editado.description"}})],1),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-combobox",{attrs:{items:t.businessNode,label:"(Seleccione una opción)","item-text":"name",outlined:"",dense:"",required:""},model:{value:t.editado.select,callback:function(e){t.$set(t.editado,"select",e)},expression:"editado.select"}})],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[i("v-card-text",[i("v-btn",{staticClass:"primary",attrs:{raised:""},on:{click:t.onPickFile}},[t._v("Subir imagen")]),t._v(" "),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg",required:""},on:{change:t.onFilePicked}})],1)],1)],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"blue-grey"},on:{click:t.cancelar}},[t._v("Cancelar")]),t._v(" "),i("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"teal accent-4"},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1)],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.action",fn:function(e){var s=e.item;return[i("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:""+s.image}}),t._v(" "),i("v-btn",{staticClass:"mr-2",attrs:{fab:"",dark:"",small:"",color:"cyan"},on:{click:function(e){return t.editar(s)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-pencil")])],1),t._v(" "),i("v-btn",{staticClass:"mr-2",attrs:{fab:"",dark:"",small:"",color:"error"},on:{click:function(e){return t.borrar(s)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-delete")])],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=n.exports}}]);