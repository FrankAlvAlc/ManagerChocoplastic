(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{233:function(t,e,i){"use strict";i.r(e);var a={data:function(){return{headers:[{text:"ID",value:"id",width:"5%"},{text:"Nombre",value:"name",width:"35%"},{text:"Descripción",value:"description",width:"20%"},{text:"Key",value:"long_key",width:"20%"},{text:"Precio",value:"price",width:"10%"},{text:"Contenido",value:"content",width:"10%"},{text:"Unidad",value:"unit",width:"10%"},{text:"Marca",value:"brand",width:"10%"},{text:"Image",value:"image",sortable:!1,width:"15%"},{text:"",value:"action",width:"20%"}],nameRules:[function(t){return!!t||"Requerido."},function(t){return t&&t.length>=3||"Min 3 caracteres"}],unidadRules:[function(t){return!!t||"Requerido."},function(t){return t&&t.length>=1||"Min 1 caracter"}],numberRules:[function(t){return!!t||"Requerido."},function(t){return t>0||"El número debe ser mayor a cero"}],valid:!0,products:[],search:"",dialog:!1,imageUrl:"",select:{id:0},selectinput:{id:0},selectSub:{id:0},categories:[],subcategories:[],editado:{id:"",name:"",description:"",long_key:"",price:"",content:"",unit:"",brand:"",sales_unit:"",bulk:"",imageUrl:this.imageUrl,idsubcategoria:0,select:0},defaultItem:{id:"",name:"",description:"",long_key:"",price:"",content:"",unit:"",brand:"",imageUrl:this.imageUrl,sales_unit:"",bulk:"",idsubcategoria:0}}},created:function(){this.getProducts(),this.getCategories()},methods:{changeRoute:function(t){console.log(t),this.getSubCategories(t),console.log(this.select)},changeRouteSub:function(t){this.idsubcategoria=t,this.editado.category_id=this.idsubcategoria,console.log("ID sub "+this.idsubcategoria+" --\x3e "+this.editado.category_id)},validate:function(){this.$refs.form.validate()&&(this.snackbar=!0)},getProducts:function(){var t=this;axios.get("/productList").then((function(e){t.products=e.data.data})).catch((function(e){t.errors.push(e)}))},getCategories:function(){var t=this;axios.get("/CategoriesCbx").then((function(e){t.categories=e.data.data,console.log(t.categories)})).catch((function(e){t.errors.push(e)}))},getSubCategories:function(t){var e=this;axios.get("/subcategories/"+t).then((function(t){e.subcategories=t.data.data})).catch((function(t){e.errors.push(t)}))},guardar:function(){this.$refs.form.validate()?(this.editedIndex>-1?(this.textSnack="¡Actualización Exitosa!",this.editarProduct()):""==this.editado.marca||""==this.editado.modelo||0==this.editado.stock?(this.snackbar=!0,this.textSnack="Datos incompletos."):(this.textSnack="¡Alta exitosa!",this.addProduct()),this.cancelar()):this.snackbar=!0},editarProduct:function(){var t=this;console.log(this.editado),axios.put("/product/update",this.editado).then((function(e){t.getProducts()})),this.name="",this.description=""},editar:function(t){this.getCategories(),this.editedIndex=this.products.indexOf(t),this.editado=Object.assign({},t),this.select.id=parseInt(this.editado.select),null!=this.editado.select&&(this.getSubCategories(this.select.id),null!=this.selectSub&&(this.selectSub.id=this.editado.category_id)),this.dialog=!0},borrar:function(t){var e=this.products.indexOf(t);this.editado=Object.assign({},t),console.log(this.products[e].id),1==confirm("¿Está seguro de borrar el registro?")?(this.deleteProduct(),this.snackbar=!0,this.textSnack="Se eliminó el registro."):(this.snackbar=!0,this.textSnack="Operación cancelada.")},addProduct:function(){var t=this;axios.post("/product/add",this.editado).then((function(e){t.getProducts()})),this.name="",this.description=""},deleteProduct:function(){var t=this;axios.put("/product/delete",this.editado).then((function(e){t.getProducts()})),this.name="",this.description=""},cancelar:function(){this.dialog=!1,this.editado=Object.assign({},this.defaultItem),this.editedIndex=-1},onPickFile:function(){this.$refs.fileInput.click()},onFilePicked:function(t){var e=this,i=t.target.files,a=(i[0].name,new FileReader);a.addEventListener("load",(function(){e.imageUrl=a.result,e.editado.imageUrl=a.result})),a.readAsDataURL(i[0]),this.image=i[0]}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Registro":"Editar Registro"}}},s=i(3),n=Object(s.a)(a,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[i("v-row",[i("v-col",[i("v-data-table",{staticClass:"elevation-3",attrs:{headers:t.headers,items:t.products,search:t.search,"sort-by":"id"},scopedSlots:t._u([{key:"top",fn:function(){return[i("v-system-bar",{attrs:{color:"indigo darken-2",dark:""}}),t._v(" "),i("v-toolbar",{attrs:{flat:"",color:"indigo"},scopedSlots:t._u([{key:"extension",fn:function(){return[i("v-btn",{attrs:{fab:"",color:"cyan accent-2",bottom:"",left:"",absolute:""},on:{click:function(e){t.dialog=!t.dialog}}},[i("v-icon",[t._v("mdi-plus")])],1)]},proxy:!0}])},[t._v(" "),i("v-toolbar-title",{staticClass:"white--text"},[t._v("Productos")]),t._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),t._v(" "),i("v-spacer"),t._v(" "),i("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(t){t.on}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card",[i("v-card-title",{staticClass:"cyan white--text"},[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),i("v-card-text",[i("v-container",[i("v-text-field",{attrs:{label:"Nombre",rules:t.nameRules,required:""},model:{value:t.editado.name,callback:function(e){t.$set(t.editado,"name",e)},expression:"editado.name"}}),t._v(" "),i("v-text-field",{attrs:{label:"Descripción",rules:t.nameRules,required:""},model:{value:t.editado.description,callback:function(e){t.$set(t.editado,"description",e)},expression:"editado.description"}}),t._v(" "),i("v-text-field",{attrs:{label:"Key",rules:t.nameRules,required:""},model:{value:t.editado.long_key,callback:function(e){t.$set(t.editado,"long_key",e)},expression:"editado.long_key"}}),t._v(" "),i("v-text-field",{attrs:{label:"Precio",prefix:"$",type:"number",rules:t.numberRules,required:""},model:{value:t.editado.price,callback:function(e){t.$set(t.editado,"price",e)},expression:"editado.price"}}),t._v(" "),i("v-text-field",{attrs:{label:"Contenido",type:"number",rules:t.numberRules},model:{value:t.editado.content,callback:function(e){t.$set(t.editado,"content",e)},expression:"editado.content"}}),t._v(" "),i("v-text-field",{attrs:{label:"Unidad",rules:t.unidadRules},model:{value:t.editado.unit,callback:function(e){t.$set(t.editado,"unit",e)},expression:"editado.unit"}}),t._v(" "),i("v-text-field",{attrs:{label:"Marca",rules:t.nameRules},model:{value:t.editado.brand,callback:function(e){t.$set(t.editado,"brand",e)},expression:"editado.brand"}}),t._v(" "),i("v-select",{attrs:{items:t.categories,label:"Select","single-line":"","item-text":"name","item-value":"id","return-object":"","persistent-hint":""},on:{change:function(e){return t.changeRoute(""+t.select.id)}},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}}),t._v(" "),i("v-select",{attrs:{items:t.subcategories,label:"Select","single-line":"","item-text":"name","item-value":"id","return-object":"","persistent-hint":""},on:{change:function(e){return t.changeRouteSub(""+t.selectSub.id)}},model:{value:t.selectSub,callback:function(e){t.selectSub=e},expression:"selectSub"}}),t._v(" "),i("v-card-text",[i("v-btn",{staticClass:"primary",attrs:{raised:""},on:{click:t.onPickFile}},[t._v("Subir imagen")]),t._v(" "),i("input",{ref:"fileInput",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/jpeg"},on:{change:t.onFilePicked}})],1),t._v(" "),i("v-layout",[i("img",{attrs:{src:t.imageUrl,height:"150"}})])],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"blue-grey"},on:{click:t.cancelar}},[t._v("Cancelar")]),t._v(" "),i("v-btn",{staticClass:"ma-2 white--text",attrs:{color:"teal accent-4"},on:{click:t.guardar}},[t._v("Guardar")])],1)],1)],1)],1)],1),t._v(" "),i("v-col",{attrs:{cols:"12",sm:"12"}},[i("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.image",fn:function(t){var e=t.item;return[i("div",{staticClass:"p-2"},[i("v-img",{attrs:{src:e.image,alt:e.name,"aspect-ratio":"1"}})],1)]}},{key:"item.action",fn:function(e){var a=e.item;return[i("v-btn",{staticClass:"mr-2",attrs:{fab:"",dark:"",small:"",color:"cyan"},on:{click:function(e){return t.editar(a)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-pencil")])],1),t._v(" "),i("v-btn",{staticClass:"mr-2",attrs:{fab:"",dark:"",small:"",color:"error"},on:{click:function(e){return t.borrar(a)}}},[i("v-icon",{attrs:{dark:""}},[t._v("mdi-delete")])],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=n.exports}}]);