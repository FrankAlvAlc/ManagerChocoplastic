{"map":"{\"version\":3,\"sources\":[\"8.js\"],\"names\":[\"window\",\"push\",\"228\",\"module\",\"__webpack_exports__\",\"__webpack_require__\",\"r\",\"views_Coveragesvue_type_script_lang_js_\",\"data\",\"map\",\"drawingManager\",\"stores\",\"store\",\"created\",\"this\",\"getCoverages\",\"mounted\",\"mapsScript\",\"document\",\"createElement\",\"setAttribute\",\"head\",\"appendChild\",\"methods\",\"_this\",\"axios\",\"get\",\"then\",\"response\",\"e\",\"console\",\"log\",\"initMap\",\"self\",\"google\",\"maps\",\"Map\",\"getElementById\",\"center\",\"lat\",\"lng\",\"zoom\",\"drawing\",\"DrawingManager\",\"drawingControl\",\"drawingControlOptions\",\"position\",\"ControlPosition\",\"TOP_CENTER\",\"drawingModes\",\"setMap\",\"loadPolygons\",\"event\",\"addListener\",\"polygon\",\"savePolygon\",\"setPolygonEvents\",\"undefined\",\"vertex\",\"confirm\",\"destroyPolygon\",\"getPath\",\"removeAt\",\"updatePolygon\",\"_this2\",\"encode\",\"geometry\",\"encoding\",\"encodePath\",\"find\",\"item\",\"id\",\"put\",\"name\",\"store_id\",\"getArray\",\"toString\",\"setDrawingMode\",\"post\",\"t\",\"length\",\"c\",\"forEach\",\"polyg\",\"drawPolygonWithEvents\",\"drawPolygon\",\"polygonOptions\",\"editable\",\"clickable\",\"decodePath\",\"Polygon\",\"path\",\"strokeWeight\",\"strokeColor\",\"fillColor\",\"setCenter\",\"componentNormalizer\",\"component\",\"Object\",\"_vm\",\"_h\",\"$createElement\",\"_c\",\"_self\",\"staticClass\",\"_v\",\"attrs\",\"type\",\"data-widget\",\"data-toggle\",\"title\",\"items\",\"item-text\",\"item-value\",\"filled\",\"chips\",\"label\",\"placeholder\",\"on\",\"change\",\"model\",\"value\",\"callback\",\"$$v\",\"expression\",\"staticStyle\",\"height\"],\"mappings\":\"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\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{228:function(t,e,o){\"use strict\";o.r(e);var a={data:function(){return{map:{},drawingManager:{},stores:[],store:\"\"}},created:function(){this.getCoverages()},mounted:function(){var t=document.createElement(\"script\");t.setAttribute(\"src\",\"https://maps.googleapis.com/maps/api/js?key=AIzaSyC4P8sBXqyMQpCqYbmnrV5WeHYgz9ukRSg&libraries=drawing,geometry&sensor=false\"),document.head.appendChild(t)},methods:{getCoverages:function(){var t=this;axios.get(\"/coverages\").then((function(e){t.stores=e.data.data})).catch((function(t){console.log(t)}))},initMap:function(){var t=this;this.map=new google.maps.Map(document.getElementById(\"map\"),{center:{lat:17.988073,lng:-92.940934},zoom:15}),this.drawingManager=new google.maps.drawing.DrawingManager({drawingControl:!0,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[\"polygon\"]}}),this.drawingManager.setMap(this.map),t.loadPolygons(this.map),google.maps.event.addListener(this.drawingManager,\"polygoncomplete\",(function(e){t.savePolygon(e),t.setPolygonEvents(e)}))},setPolygonEvents:function(t){var e=this;google.maps.event.addListener(t,\"click\",(function(t){console.log(this)})),google.maps.event.addListener(t,\"rightclick\",(function(o){null==o.vertex?confirm(\"Â¿Desea eliminar esta cobertura? Este cambio no se puede deshacer.\")&&(this.setMap(null),e.destroyPolygon(t,this)):(t.getPath().removeAt(o.vertex),e.updatePolygon(t))})),google.maps.event.addListener(t.getPath(),\"set_at\",(function(o){e.updatePolygon(t)})),google.maps.event.addListener(t.getPath(),\"insert_at\",(function(){e.updatePolygon(t)}))},savePolygon:function(t){var e=this,o=this,a=google.maps.geometry.encoding.encodePath(t.getPath()),n=this.stores.find((function(t){return t.id==e.store}));axios.put(\"/coverages\",{id:o.store,name:n.name,store_id:n.id,polygon:t.getPath().getArray().toString(),encode:a}).then((function(e){t.id=e.data.data.id,o.drawingManager.setDrawingMode(null)}))},updatePolygon:function(t){var e=google.maps.geometry.encoding.encodePath(t.getPath());axios.post(\"/coverages/\"+t.id,{polygon:t.getPath().getArray().toString(),encode:e}).then((function(t){console.log(\"Poligono actualizado\")}))},destroyPolygon:function(t,e){axios.get(\"/coverages/destroy/\"+t.id).then((function(t){e.setMap(null)}))},loadPolygons:function(t){var e=this;axios.get(\"/coverages/\"+this.store).then((function(t){if(!(t.data.data.length<=0)){var o=0;t.data.data.forEach((function(t){0==o?null!=t&&e.drawPolygonWithEvents(t):e.drawPolygon(t),o+=1}))}}))},drawPolygon:function(t){this.drawingManager.drawingControl=!0,this.drawingManager.polygonOptions={editable:!1,clickable:!1},this.drawingManager.setMap(this.map);var e=google.maps.geometry.encoding.decodePath(t.encode);new google.maps.Polygon({path:e,map:this.map,editable:!1,clickable:!1,strokeWeight:.6,strokeColor:\"#002266\",fillColor:\"#002266\"}).id=t.id},drawPolygonWithEvents:function(t){var e=google.maps.geometry.encoding.decodePath(t.encode),o=new google.maps.Polygon({path:e,map:this.map,editable:!0,strokeWeight:.8,strokeColor:\"#992200\",fillColor:\"#e00\"});o.id=t.id,this.map.setCenter(e[0]),this.setPolygonEvents(o)}}},n=o(3),s=Object(n.a)(a,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"v-container\",[o(\"div\",{staticClass:\"container-fluid spark-screen\"},[o(\"div\",{staticClass:\"row\"},[o(\"div\",{staticClass:\"col-md-12 col-sm6\"},[o(\"div\",{staticClass:\"box box-primary collapsed-box\"},[o(\"div\",{staticClass:\"box-header with-border\"},[o(\"h3\",{staticClass:\"box-title\"},[t._v(\"Nueva cobertura de entrega\")]),t._v(\" \"),o(\"div\",{staticClass:\"box-tools pull-right\"},[o(\"button\",{staticClass:\"btn btn-box-tool\",attrs:{type:\"button\",\"data-widget\":\"collapse\",\"data-toggle\":\"tooltip\",title:\"Abrir\"}},[o(\"i\",{staticClass:\"fa fa-plus\"})])])]),t._v(\" \"),o(\"div\",{staticClass:\"box-body\"},[o(\"div\",{staticClass:\"form-group\"},[o(\"label\",[t._v(\"Sucursal\")]),t._v(\" \"),o(\"v-select\",{attrs:{items:t.stores,\"item-text\":\"name\",\"item-value\":\"id\",filled:\"\",chips:\"\",label:\"Tienda\",placeholder:\"Selecciona sucursal\"},on:{change:t.initMap},model:{value:t.store,callback:function(e){t.store=e},expression:\"store\"}})],1),t._v(\" \"),o(\"div\",{staticStyle:{height:\"500px\"},attrs:{id:\"map\"}})])])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);","extractedComments":[]}